///////////////////////////////////////////////////////////////////////////////////////////////////
/* version : 1.01 ver */
///////////////////////////////////////////////////////////////////////////////////////////////////
/* 전역함수 ( 사용과 초기화에 주의 ) */
var boardName = [["A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10", "A11", "A12", "A13", "A14", "A15", "A16", "A17", "A18", "A19"],
["B1", "B2", "B3", "B4", "B5", "B6", "B7", "B8", "B9", "B10", "B11", "B12", "B13", "B14", "B15", "B16", "B17", "B18", "B19"],
["C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C9", "C10", "C11", "C12", "C13", "C14", "C15", "C16", "C17", "C18", "C19"],
["D1", "D2", "D3", "D4", "D5", "D6", "D7", "D8", "D9", "D10", "D11", "D12", "D13", "D14", "D15", "D16", "D17", "D18", "D19"],
["E1", "E2", "E3", "E4", "E5", "E6", "E7", "E8", "E9", "E10", "E11", "E12", "E13", "E14", "E15", "E16", "E17", "E18", "E19"],
["F1", "F2", "F3", "F4", "F5", "F6", "F7", "F8", "F9", "F10", "F11", "F12", "F13", "F14", "F15", "F16", "F17", "F18", "F19"],
["G1", "G2", "G3", "G4", "G5", "G6", "G7", "G8", "G9", "G10", "G11", "G12", "G13", "G14", "G15", "G16", "G17", "G18", "G19"],
["H1", "H2", "H3", "H4", "H5", "H6", "H7", "H8", "H9", "H10", "H11", "H12", "H13", "H14", "H15", "H16", "H17", "H18", "H19"],
["I1", "I2", "I3", "I4", "I5", "I6", "I7", "I8", "I9", "I10", "I11", "I12", "I13", "I14", "I15", "I16", "I17", "I18", "I19"],
["J1", "J2", "J3", "J4", "J5", "J6", "J7", "J8", "J9", "J10", "J11", "J12", "J13", "J14", "J15", "J16", "J17", "J18", "J19"],
["K1", "K2", "K3", "K4", "K5", "K6", "K7", "K8", "K9", "K10", "K11", "K12", "K13", "K14", "K15", "K16", "K17", "K18", "K19"],
["L1", "L2", "L3", "L4", "L5", "L6", "L7", "L8", "L9", "L10", "L11", "L12", "L13", "L14", "L15", "L16", "L17", "L18", "L19"],
["M1", "M2", "M3", "M4", "M5", "M6", "M7", "M8", "M9", "M10", "M11", "M12", "M13", "M14", "M15", "M16", "M17", "M18", "M19"],
["N1", "N2", "N3", "N4", "N5", "N6", "N7", "N8", "N9", "N10", "N11", "N12", "N13", "N14", "N15", "N16", "N17", "N18", "N19"],
["O1", "O2", "O3", "O4", "O5", "O6", "O7", "O8", "O9", "O10", "O11", "O12", "O13", "O14", "O15", "O16", "O17", "O18", "O19"],
["P1", "P2", "P3", "P4", "P5", "P6", "P7", "P8", "P9", "P10", "P11", "P12", "P13", "P14", "P15", "P16", "P17", "P18", "P19"],
["Q1", "Q2", "Q3", "Q4", "Q5", "Q6", "Q7", "Q8", "Q9", "Q10", "Q11", "Q12", "Q13", "Q14", "Q15", "Q16", "Q17", "Q18", "Q19"],
["R1", "R2", "R3", "R4", "R5", "R6", "R7", "R8", "R9", "R10", "R11", "R12", "R13", "R14", "R15", "R16", "R17", "R18", "R19"],
["S1", "S2", "S3", "S4", "S5", "S6", "S7", "S8", "S9", "S10", "S11", "S12", "S13", "S14", "S15", "S16", "S17", "S18", "S19"],]
var board = new Array(19);
var stone = -1; // -1 : 흑돌⚫ 1 : 백돌⚪
var dir = [[-1, 0], [-1, 1], [0, 1], [1, 1], [1, 0], [1, -1], [0, -1], [-1, -1]];

///////////////////////////////////////////////////////////////////////////////////////////////////
/* 스크립트 사용 */
Init();

///////////////////////////////////////////////////////////////////////////////////////////////////
/* 함수들 */

/* 보드판을 초기화 시켜주는 함수 */
function Init() {
  for (let i = 0; i < 19; i++) {  // 시간 복잡도 : 19 * 19
    board[i] = new Array(19);
    for (let j = 0; j < 19; j++) {
      board[i][j] = 0;
    }
  }
}

/* 누가 이겼는지를 확인하는 함수 */
function checkWin() {
  let count1, count2, count3, count4;
  for (let y = 0; y < 19; y++) { // 시간 복잡도 : 19 * 19 * 5
    for (let x = 0; x < 19; x++) {
      if (board[y][x] != 0) {
        count1 = 0, count2 = 0, count3 = 0, count4 = 0;
        for (let k = 0; k < 5; k++) {
          if (board[y][x + k] == board[y][x]) count1++;
          if (board[y + k][x + k] == board[y][x]) count2++;
          if (board[y + k][x] == board[y][x]) count3++;
          if (board[y + k][x - k] == board[y][x]) count4++;
        }
        if (count1 == 5 || count2 == 5 || count3 == 5 || count4 == 5) {
          if (board[y][x] == -1) alert("흑 승리!");
          else if (board[y][x] == 1) alert("백 승리!");
        }
      }
    }
  }
}

// 수정사항 : 착수한 곳을 기준으로 8방향 5칸 (시간 복잡도 : 40) 만에 확인할 수 있음 (기존 : 1805)

/* 착수 함수 */
function put(clicked_id) {
  let flag = false;
  for (let y = 0; y < 19; y++) { // 시간 복잡도 : 19 * 19
    for (let x = 0; x < 19; x++) {
      if (boardName[y][x] == clicked_id) {
        if (board[y][x] != 0) return; // 이미 돌이 착수되어 있는 경우
        board[y][x] = stone;
        flag = true;
      }
    } if (flag) break;
  }

  let cell = document.getElementById(clicked_id);
  if (stone == -1) cell.innerHTML = "⚫";
  else if (stone == 1) cell.innerHTML = "⚪";
  cell.style.transform = "scale(1.5)";
  stone *= -1;
  checkWin();
}
